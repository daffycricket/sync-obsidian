{
    # Utiliser le challenge DNS-01 au lieu de HTTP-01
    # Nécessaire quand les ports 80/443 ne sont pas accessibles
    acme_dns duckdns {$DUCKDNS_TOKEN}
    
    # Utiliser Google/Cloudflare DNS pour vérifier la propagation
    # (les serveurs DNS de DuckDNS ne sont pas joignables depuis certains réseaux)
    acme_dns_resolvers 8.8.8.8 1.1.1.1
}

{$DOMAIN:mon-vault.duckdns.org} {
    reverse_proxy syncobsidian:8000
    
    # Headers de sécurité
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
    }
    
    # Logs
    log {
        output stdout
        format console
    }
}
